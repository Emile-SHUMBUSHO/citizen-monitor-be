{"version":3,"file":"loginAdmin.js","names":["req","res","next","FindOne","email","body","status","user","Object","keys","length","role","UNAUTHORIZED","json","error","auth","get"],"sources":["../../src/middlewares/loginAdmin.js"],"sourcesContent":["import status from '../config/status'\nimport { FindOne } from '../database/queries'\n/**\n * @param {object} req Request to the route\n * @param {object} res Response from server\n * @param {object} next middleware called to pass after success\n * @returns {object} returned response\n */\nexport default async (req, res, next) => {\n  const user = await FindOne('User', {\n    email: req.body.email,\n    status: 'active',\n  })\n  if (!Object.keys(user).length || user.role === 'normal') {\n    return res.status(status.UNAUTHORIZED).json({\n      error: `Account with '${req.body.email}' email do not exist`,\n    })\n  }\n  req.auth = user.get()\n  next()\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;EAAA,yFAMe,iBAAOA,GAAG,EAAEC,GAAG,EAAEC,IAAI;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,OACf,IAAAC,gBAAO,EAAC,MAAM,EAAE;cACjCC,KAAK,EAAEJ,GAAG,CAACK,IAAI,CAACD,KAAK;cACrBE,MAAM,EAAE;YACV,CAAC,CAAC;UAAA;YAHIC,IAAI;YAAA,MAIN,CAACC,MAAM,CAACC,IAAI,CAACF,IAAI,CAAC,CAACG,MAAM,IAAIH,IAAI,CAACI,IAAI,KAAK,QAAQ;cAAA;cAAA;YAAA;YAAA,iCAC9CV,GAAG,CAACK,MAAM,CAACA,kBAAM,CAACM,YAAY,CAAC,CAACC,IAAI,CAAC;cAC1CC,KAAK,0BAAmBd,GAAG,CAACK,IAAI,CAACD,KAAK;YACxC,CAAC,CAAC;UAAA;YAEJJ,GAAG,CAACe,IAAI,GAAGR,IAAI,CAACS,GAAG,EAAE;YACrBd,IAAI,EAAE;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CACP;EAAA;IAAA;EAAA;AAAA;AAAA"}