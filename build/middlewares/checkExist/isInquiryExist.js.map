{"version":3,"file":"isInquiryExist.js","names":["req","res","next","where","id","params","include","model","db","as","attributes","exclude","FindOne","inquiry","Object","keys","length","status","NO_CONTENT","send","error"],"sources":["../../../src/middlewares/checkExist/isInquiryExist.js"],"sourcesContent":["import 'dotenv/config'\nimport status from '../../config/status'\nimport db from '../../database/models'\nimport { FindOne } from '../../database/queries'\n\nexport default async (req, res, next) => {\n  const where = {\n    id: req.params.id,\n  }\n  const include = [\n    {\n      model: db['User'],\n      as: 'user',\n      attributes: { exclude: ['createdAt', 'updatedAt'] },\n      include: {\n        model: db['Profile'],\n        as: 'user',\n      },\n    },\n    {\n      model: db['Car'],\n      as: 'car',\n      include: [\n        {\n          model: db['CarMeta'],\n          as: 'carMeta',\n          attributes: { exclude: ['createdAt', 'updatedAt'] },\n        },\n        {\n          model: db['CarType'],\n          as: 'carType',\n          attributes: { exclude: ['createdAt', 'updatedAt'] },\n        },\n        {\n          model: db['CarMake'],\n          as: 'carMake',\n          attributes: { exclude: ['createdAt', 'updatedAt'] },\n        },\n      ],\n    },\n  ]\n  const inquiry = await FindOne('Inquiry', where, include)\n  if (Object.keys(inquiry).length === 0) {\n    return res.status(status.NO_CONTENT).send({\n      error: 'Inquiry not found',\n    })\n  }\n  req.inquiry = inquiry\n  return next()\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AAAgD;EAAA,yFAEjC,iBAAOA,GAAG,EAAEC,GAAG,EAAEC,IAAI;IAAA;IAAA;MAAA;QAAA;UAAA;YAC5BC,KAAK,GAAG;cACZC,EAAE,EAAEJ,GAAG,CAACK,MAAM,CAACD;YACjB,CAAC;YACKE,OAAO,GAAG,CACd;cACEC,KAAK,EAAEC,kBAAE,CAAC,MAAM,CAAC;cACjBC,EAAE,EAAE,MAAM;cACVC,UAAU,EAAE;gBAAEC,OAAO,EAAE,CAAC,WAAW,EAAE,WAAW;cAAE,CAAC;cACnDL,OAAO,EAAE;gBACPC,KAAK,EAAEC,kBAAE,CAAC,SAAS,CAAC;gBACpBC,EAAE,EAAE;cACN;YACF,CAAC,EACD;cACEF,KAAK,EAAEC,kBAAE,CAAC,KAAK,CAAC;cAChBC,EAAE,EAAE,KAAK;cACTH,OAAO,EAAE,CACP;gBACEC,KAAK,EAAEC,kBAAE,CAAC,SAAS,CAAC;gBACpBC,EAAE,EAAE,SAAS;gBACbC,UAAU,EAAE;kBAAEC,OAAO,EAAE,CAAC,WAAW,EAAE,WAAW;gBAAE;cACpD,CAAC,EACD;gBACEJ,KAAK,EAAEC,kBAAE,CAAC,SAAS,CAAC;gBACpBC,EAAE,EAAE,SAAS;gBACbC,UAAU,EAAE;kBAAEC,OAAO,EAAE,CAAC,WAAW,EAAE,WAAW;gBAAE;cACpD,CAAC,EACD;gBACEJ,KAAK,EAAEC,kBAAE,CAAC,SAAS,CAAC;gBACpBC,EAAE,EAAE,SAAS;gBACbC,UAAU,EAAE;kBAAEC,OAAO,EAAE,CAAC,WAAW,EAAE,WAAW;gBAAE;cACpD,CAAC;YAEL,CAAC,CACF;YAAA;YAAA,OACqB,IAAAC,gBAAO,EAAC,SAAS,EAAET,KAAK,EAAEG,OAAO,CAAC;UAAA;YAAlDO,OAAO;YAAA,MACTC,MAAM,CAACC,IAAI,CAACF,OAAO,CAAC,CAACG,MAAM,KAAK,CAAC;cAAA;cAAA;YAAA;YAAA,iCAC5Bf,GAAG,CAACgB,MAAM,CAACA,kBAAM,CAACC,UAAU,CAAC,CAACC,IAAI,CAAC;cACxCC,KAAK,EAAE;YACT,CAAC,CAAC;UAAA;YAEJpB,GAAG,CAACa,OAAO,GAAGA,OAAO;YAAA,iCACdX,IAAI,EAAE;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CACd;EAAA;IAAA;EAAA;AAAA;AAAA"}