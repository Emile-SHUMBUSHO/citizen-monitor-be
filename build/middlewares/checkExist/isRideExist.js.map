{"version":3,"file":"isRideExist.js","names":["req","res","next","where","id","params","rideId","include","model","db","as","attributes","exclude","Car","FindOne","ride","Object","keys","length","status","NO_CONTENT","send","error"],"sources":["../../../src/middlewares/checkExist/isRideExist.js"],"sourcesContent":["import 'dotenv/config'\nimport status from '../../config/status'\nimport db from '../../database/models'\nimport { FindOne } from '../../database/queries'\n\nexport default async (req, res, next) => {\n  const where = {\n    id: req.params.rideId,\n  }\n  const include = [\n    {\n      model: db['User'],\n      as: 'user',\n      attributes: { exclude: ['createdAt', 'updatedAt'] },\n      include: {\n        model: db['Profile'],\n        as: 'user',\n      },\n    },\n    {\n      model: db.Car,\n      as: 'car',\n      attributes: { exclude: ['createdAt', 'updatedAt'] },\n    },\n  ]\n\n  const ride = await FindOne('Ride', where, include)\n  if (Object.keys(ride).length === 0) {\n    return res.status(status.NO_CONTENT).send({\n      error: 'Ride not found',\n    })\n  }\n  req.ride = ride\n  return next()\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AAAgD;EAAA,yFAEjC,iBAAOA,GAAG,EAAEC,GAAG,EAAEC,IAAI;IAAA;IAAA;MAAA;QAAA;UAAA;YAC5BC,KAAK,GAAG;cACZC,EAAE,EAAEJ,GAAG,CAACK,MAAM,CAACC;YACjB,CAAC;YACKC,OAAO,GAAG,CACd;cACEC,KAAK,EAAEC,kBAAE,CAAC,MAAM,CAAC;cACjBC,EAAE,EAAE,MAAM;cACVC,UAAU,EAAE;gBAAEC,OAAO,EAAE,CAAC,WAAW,EAAE,WAAW;cAAE,CAAC;cACnDL,OAAO,EAAE;gBACPC,KAAK,EAAEC,kBAAE,CAAC,SAAS,CAAC;gBACpBC,EAAE,EAAE;cACN;YACF,CAAC,EACD;cACEF,KAAK,EAAEC,kBAAE,CAACI,GAAG;cACbH,EAAE,EAAE,KAAK;cACTC,UAAU,EAAE;gBAAEC,OAAO,EAAE,CAAC,WAAW,EAAE,WAAW;cAAE;YACpD,CAAC,CACF;YAAA;YAAA,OAEkB,IAAAE,gBAAO,EAAC,MAAM,EAAEX,KAAK,EAAEI,OAAO,CAAC;UAAA;YAA5CQ,IAAI;YAAA,MACNC,MAAM,CAACC,IAAI,CAACF,IAAI,CAAC,CAACG,MAAM,KAAK,CAAC;cAAA;cAAA;YAAA;YAAA,iCACzBjB,GAAG,CAACkB,MAAM,CAACA,kBAAM,CAACC,UAAU,CAAC,CAACC,IAAI,CAAC;cACxCC,KAAK,EAAE;YACT,CAAC,CAAC;UAAA;YAEJtB,GAAG,CAACe,IAAI,GAAGA,IAAI;YAAA,iCACRb,IAAI,EAAE;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CACd;EAAA;IAAA;EAAA;AAAA;AAAA"}