{"version":3,"file":"app.js","names":["app","express","server","http","createServer","dotenv","config","use","session","secret","process","env","SECRET_KEY","cookie","maxAge","resave","saveUninitialized","logger","json","urlencoded","extended","cors","routes","swaggerUI","serve","setup","swaggerDocs","req","res","next","createError","err","locals","message","error","get","status","send"],"sources":["../src/app.js"],"sourcesContent":["import http from 'http'\nimport createError from 'http-errors'\nimport express from 'express'\nimport logger from 'morgan'\nimport dotenv from 'dotenv'\nimport cors from 'cors'\nimport session from 'express-session'\nimport routes from './routes'\nimport swaggerUI from 'swagger-ui-express'\nimport swaggerDocs from \"./documention\";\n\nconst app = express()\nconst server = http.createServer(app)\n\ndotenv.config()\n\napp.use(\n  session({\n    secret: process.env.SECRET_KEY || 'CITIZEN-MONITOR',\n    cookie: { maxAge: 60000 },\n    resave: true,\n    saveUninitialized: true,\n  })\n)\n\n// swagger route\n\napp.use(logger('dev'))\n\napp.use(express.json())\napp.use(express.urlencoded({ extended: false }))\napp.use(cors())\n\napp.use('/', routes)\n\n// api documentation\napp.use(\"/docs\", swaggerUI.serve, swaggerUI.setup(swaggerDocs));\n\n// catch 404 and forward to error handler\napp.use((req, res, next) => {\n  next(createError(404))\n})\n\n// error handler\napp.use((err, req, res, next) => {\n  // set locals, only providing error in development\n  res.locals.message = err.message\n  res.locals.error = req.app.get('env') === 'development' ? err : {}\n\n  // render the error page\n  res.status(err.status || 500)\n  res.send({\n    message: err.message,\n    error: err.status,\n  })\n  next()\n})\n\napp.server = server\nexport default app\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMA,GAAG,GAAG,IAAAC,mBAAO,GAAE;AACrB,IAAMC,MAAM,GAAGC,gBAAI,CAACC,YAAY,CAACJ,GAAG,CAAC;AAErCK,kBAAM,CAACC,MAAM,EAAE;AAEfN,GAAG,CAACO,GAAG,CACL,IAAAC,0BAAO,EAAC;EACNC,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,IAAI,iBAAiB;EACnDC,MAAM,EAAE;IAAEC,MAAM,EAAE;EAAM,CAAC;EACzBC,MAAM,EAAE,IAAI;EACZC,iBAAiB,EAAE;AACrB,CAAC,CAAC,CACH;;AAED;;AAEAhB,GAAG,CAACO,GAAG,CAAC,IAAAU,kBAAM,EAAC,KAAK,CAAC,CAAC;AAEtBjB,GAAG,CAACO,GAAG,CAACN,mBAAO,CAACiB,IAAI,EAAE,CAAC;AACvBlB,GAAG,CAACO,GAAG,CAACN,mBAAO,CAACkB,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAM,CAAC,CAAC,CAAC;AAChDpB,GAAG,CAACO,GAAG,CAAC,IAAAc,gBAAI,GAAE,CAAC;AAEfrB,GAAG,CAACO,GAAG,CAAC,GAAG,EAAEe,kBAAM,CAAC;;AAEpB;AACAtB,GAAG,CAACO,GAAG,CAAC,OAAO,EAAEgB,4BAAS,CAACC,KAAK,EAAED,4BAAS,CAACE,KAAK,CAACC,uBAAW,CAAC,CAAC;;AAE/D;AACA1B,GAAG,CAACO,GAAG,CAAC,UAACoB,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAK;EAC1BA,IAAI,CAAC,IAAAC,sBAAW,EAAC,GAAG,CAAC,CAAC;AACxB,CAAC,CAAC;;AAEF;AACA9B,GAAG,CAACO,GAAG,CAAC,UAACwB,GAAG,EAAEJ,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAK;EAC/B;EACAD,GAAG,CAACI,MAAM,CAACC,OAAO,GAAGF,GAAG,CAACE,OAAO;EAChCL,GAAG,CAACI,MAAM,CAACE,KAAK,GAAGP,GAAG,CAAC3B,GAAG,CAACmC,GAAG,CAAC,KAAK,CAAC,KAAK,aAAa,GAAGJ,GAAG,GAAG,CAAC,CAAC;;EAElE;EACAH,GAAG,CAACQ,MAAM,CAACL,GAAG,CAACK,MAAM,IAAI,GAAG,CAAC;EAC7BR,GAAG,CAACS,IAAI,CAAC;IACPJ,OAAO,EAAEF,GAAG,CAACE,OAAO;IACpBC,KAAK,EAAEH,GAAG,CAACK;EACb,CAAC,CAAC;EACFP,IAAI,EAAE;AACR,CAAC,CAAC;AAEF7B,GAAG,CAACE,MAAM,GAAGA,MAAM;AAAA,eACJF,GAAG;AAAA"}